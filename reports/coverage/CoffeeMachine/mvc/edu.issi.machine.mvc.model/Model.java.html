<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pl"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>Model.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=8;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (2015-02-22 19:17:42)</a> &gt; <a href="../../index.html" class="el_group">CoffeeMachine</a> &gt; <a href="../index.html" class="el_bundle">mvc</a> &gt; <a href="index.source.html" class="el_package">edu.issi.machine.mvc.model</a> &gt; <span class="el_source">Model.java</span></div><h1>Model.java</h1><pre class="source lang-java linenums">package edu.issi.machine.mvc.model;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.NoSuchElementException;

import edu.issi.machine.Validator;
import edu.issi.machine.configuration.MachineConfiguration;
import edu.issi.machine.controller.MachineController;
import edu.issi.machine.id.PropertyIdentity;
import edu.issi.machine.product.Product;
import edu.issi.machine.product.ingredient.Ingredient;
import edu.issi.machine.product.ingredient.Unit;

/**
 * @author DawidSamolyk
 *         Model (MVC).
 */
public class Model {
    private MachineConfiguration configuration;
    private MachineController controller;

    /**
     * Konstruktor. Wymaga niepustej konfiguracji maszyny.
     * 
     * @param configuration
     *            Konfiguracja maszyny.
     * @throws IllegalArgumentException
     *             Wystąpi, jeśli konfiguracja maszyny jest pusta.
     */
<span class="fc" id="L34">    public Model(MachineConfiguration configuration) throws IllegalArgumentException {</span>
<span class="fc" id="L35">	Validator.throwExceptionWhenObjectIsNotCreated(configuration,</span>
<span class="fc" id="L36">		&quot;Nie można utworzyć modelu aplikacji z pustą konfiguracją maszyny!&quot;);</span>

<span class="fc" id="L38">	this.configuration = configuration;</span>
<span class="fc" id="L39">	this.controller = new MachineController(configuration);</span>
<span class="fc" id="L40">    }</span>

    /**
     * Uruchomienie maszyny.
     */
    public void startMachine() {
<span class="fc" id="L46">	controller.start();</span>
<span class="fc" id="L47">    }</span>

    /**
     * Zatrzymanie pracy maszyny.
     */
    public void stopMachine() {
<span class="fc" id="L53">	controller.stop();</span>
<span class="fc" id="L54">    }</span>

    /**
     * Pobranie nazw dostępnych produktów.
     * 
     * @return Nazwy dostępnych produktów.
     */
    public List&lt;String&gt; getProductsNames() {
<span class="fc" id="L62">	List&lt;String&gt; result = new ArrayList&lt;String&gt;();</span>
<span class="fc" id="L63">	Iterator&lt;Product&gt; productsIterator = configuration.getProductsIterator();</span>

<span class="fc bfc" id="L65" title="All 2 branches covered.">	while (productsIterator.hasNext()) {</span>
<span class="fc" id="L66">	    Product product = productsIterator.next();</span>
<span class="fc" id="L67">	    result.add(product.getName());</span>
	}

<span class="fc" id="L70">	return result;</span>
    }

    /**
     * Pobranie nazw dostępnych składników.
     * 
     * @return Nazwy wszystkich dostępnych składników.
     */
    public List&lt;String&gt; getAllIngredientsNames() {
<span class="fc" id="L79">	List&lt;String&gt; result = new ArrayList&lt;String&gt;();</span>
<span class="fc" id="L80">	Iterator&lt;Ingredient&gt; ingredientsIterator = configuration.getIngredientsIterator();</span>

<span class="fc bfc" id="L82" title="All 2 branches covered.">	while (ingredientsIterator.hasNext()) {</span>
<span class="fc" id="L83">	    Ingredient ingredient = ingredientsIterator.next();</span>
<span class="fc" id="L84">	    result.add(ingredient.getName());</span>
	}

<span class="fc" id="L87">	return result;</span>
    }

    /**
     * Pobranie nazw składników dla podanego produktu.
     * 
     * @param productName
     *            Nazwa produktu.
     * @return Nazwy składników wybranego produktu.
     * @throws IllegalArgumentException
     *             Wystąpi, jeśli nazwa produktu będzie pusta lub gdy maszyna
     *             nie obsługuje produktu o podanej nazwie.
     * @throws NoSuchElementException
     *             Wystąpi, jeśli nie ma podanego produktu w konfiguracji
     *             maszyny.
     */
    public List&lt;String&gt; getIngredientsNamesForProductNamed(String productName) throws IllegalArgumentException,
	    NoSuchElementException {
<span class="fc" id="L105">	Validator.throwExceptionWhenTextIsEmpty(productName, &quot;Nazwa produktu nie może być pusta!&quot;);</span>
<span class="fc" id="L106">	Product product = getProductByName(productName);</span>

<span class="fc" id="L108">	List&lt;String&gt; result = new ArrayList&lt;String&gt;();</span>

<span class="fc bfc" id="L110" title="All 2 branches covered.">	for (Ingredient eachIngredient : product) {</span>
<span class="fc" id="L111">	    result.add(eachIngredient.getName());</span>
	}

<span class="fc" id="L114">	return result;</span>
    }

    /**
     * Pobranie właściwości dla podanego składniku.
     * 
     * @param ingredientName
     *            Nazwa składnika.
     * @return Właściowści składnika.
     * @throws IllegalArgumentException
     *             Wystąpi, jeśli nazwa składnika będzie pusta lub gdy maszyna
     *             nie obsługuje składnika o podanej nazwie.
     * @throws NoSuchElementException
     *             Wystąpi, jeśli nie ma podanego składnika w konfiguracji
     *             maszyny.
     */
    public Map&lt;String, Unit&gt; getPropertiesForIngredientNamed(String ingredientName) throws IllegalArgumentException,
	    NoSuchElementException {
<span class="fc" id="L132">	Validator.throwExceptionWhenTextIsEmpty(ingredientName, &quot;Nazwa składnika nie może być pusta!&quot;);</span>

<span class="fc" id="L134">	Ingredient ingredient = getIngredientByName(ingredientName);</span>

<span class="fc" id="L136">	Map&lt;String, Unit&gt; result = new HashMap&lt;String, Unit&gt;();</span>

<span class="fc" id="L138">	Map&lt;PropertyIdentity, Double&gt; ingredientProperties = ingredient.getProperties();</span>

<span class="fc bfc" id="L140" title="All 2 branches covered.">	for (PropertyIdentity eachProperty : ingredientProperties.keySet()) {</span>
<span class="fc" id="L141">	    result.put(eachProperty.getName(), eachProperty.getUnit());</span>
	}

<span class="fc" id="L144">	return result;</span>
    }

    /**
     * Pobranie produktu po nazwie.
     * 
     * @param productName
     *            Nazwa produktu.
     * @return Produkt.
     * @throws NoSuchElementException
     *             Wystąpi, jeśli nie ma podanego produktu w konfiguracji
     *             maszyny.
     */
    public Product getProductByName(String productName) throws NoSuchElementException {
<span class="fc" id="L158">	Iterator&lt;Product&gt; iterator = configuration.getProductsIterator();</span>

<span class="fc bfc" id="L160" title="All 2 branches covered.">	while (iterator.hasNext()) {</span>
<span class="fc" id="L161">	    Product eachProduct = iterator.next();</span>

<span class="fc bfc" id="L163" title="All 2 branches covered.">	    if (eachProduct.getName().equals(productName)) {</span>
<span class="fc" id="L164">		return eachProduct;</span>
	    }
	}
<span class="fc" id="L167">	throw new NoSuchElementException(&quot;Nie znaleziono podanego produktu w konfiguracji maszyny!&quot;);</span>
    }

    /**
     * Pobranie składnika po nazwie.
     * 
     * @param ingredientName
     *            Nazwa składnika.
     * @return Składnik.
     * @throws NoSuchElementException
     *             Wystąpi, jeśli nie ma podanego składnika w konfiguracji
     *             maszyny.
     */
    public Ingredient getIngredientByName(String ingredientName) throws NoSuchElementException {
<span class="fc" id="L181">	Iterator&lt;Ingredient&gt; iterator = configuration.getIngredientsIterator();</span>

<span class="fc bfc" id="L183" title="All 2 branches covered.">	while (iterator.hasNext()) {</span>
<span class="fc" id="L184">	    Ingredient eachIngredient = iterator.next();</span>

<span class="fc bfc" id="L186" title="All 2 branches covered.">	    if (eachIngredient.getName().equals(ingredientName)) {</span>
<span class="fc" id="L187">		return eachIngredient;</span>
	    }
	}
<span class="fc" id="L190">	throw new NoSuchElementException(&quot;Nie znaleziono podanego składnika w konfiguracji maszyny!&quot;);</span>
    }

    /**
     * Pobranie właściwości składnika po nazwie.
     * 
     * @param propertyName
     *            Nazwa właściwości.
     * @return Identyfikator właściwości.
     * @throws NoSuchElementException
     *             Wystąpi, jeśli nie ma podanej właściwości składnika w
     *             konfiguracji
     *             maszyny.
     */
    public PropertyIdentity getPropertyByName(String propertyName) throws NoSuchElementException {
<span class="fc" id="L205">	Iterator&lt;Ingredient&gt; iterator = configuration.getIngredientsIterator();</span>

<span class="pc bpc" id="L207" title="1 of 2 branches missed.">	while (iterator.hasNext()) {</span>
<span class="fc" id="L208">	    Ingredient eachIngredient = iterator.next();</span>

<span class="fc" id="L210">	    Map&lt;PropertyIdentity, Double&gt; properties = eachIngredient.getProperties();</span>
<span class="fc bfc" id="L211" title="All 2 branches covered.">	    for (PropertyIdentity eachProperty : properties.keySet()) {</span>
<span class="fc bfc" id="L212" title="All 2 branches covered.">		if (eachProperty.getName().equals(propertyName)) {</span>
<span class="fc" id="L213">		    return eachProperty;</span>
		}
	    }
	}
<span class="nc" id="L217">	throw new NoSuchElementException(&quot;Nie znaleziono podanej właściwości składnika w konfiguracji maszyny!&quot;);</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span>AllTests (2015-02-22 19:17:42)</div></body></html>